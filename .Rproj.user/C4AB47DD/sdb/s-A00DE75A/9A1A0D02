{
    "collab_server" : "",
    "contents" : "#' @title get_week_dates\n#' @description Function to get the dates for each week.\n#'\n#' @param year Season to get data for.\n#' @param insert Should the function insert data into nfl_week_date table?\n#' Defaults to FALSE.\n#'\n#' @return Returns dataframe of dates for each week.\n#' @export\nget_week_dates <- function(year, insert = FALSE) {\n    sched_url <- sprintf(\n        'http://www.pro-football-reference.com/years/%s/games.htm',\n        as.character(year)\n    )\n\n    sched <- xml2::read_html(\n        sched_url\n    ) %>%\n        rvest::html_nodes('table') %>%\n        .[[1]] %>%\n        rvest::html_table() %>% .[1:3]\n\n    names(sched)[1:3] <- c('week', 'day', 'date')\n\n    sched %<>%\n        dplyr::filter(\n            !grepl('Pre*|Week| |WildCard|Division|ConfChamp|SuperBowl', week)\n        ) %>%\n        dplyr::mutate(\n            week = as.numeric(week),\n            date = ifelse(\n                grepl('January*', date),\n                strftime(as.POSIXct(paste0(date, ', ', year + 1),\n                                    format = '%B %d, %Y')),\n                strftime(as.POSIXct(paste0(date, ', ', year),\n                                    format = '%B %d, %Y'))\n            )\n        )\n\n    week_date <- data.frame(week = 1:17) %>%\n        dplyr::left_join(y = sched %>%\n                             dplyr::select(week, date),\n                         by = 'week') %>%\n        unique() %>%\n        dplyr::mutate(\n            season = year\n        )\n\n    if (insert) {\n        db_insert(table = 'nfl_week_date', df = week_date)\n        invisible(week_date)\n    } else {\n        return(week_date)\n    }\n}\n",
    "created" : 1473982391437.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "286262983",
    "id" : "9A1A0D02",
    "lastKnownWriteTime" : 1473982396,
    "last_content_update" : 1473982396160,
    "path" : "~/Documents/dfstoolkit/R/get_week_dates.R",
    "project_path" : "R/get_week_dates.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}